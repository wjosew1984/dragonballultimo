importArticle({type:'script',article:'u:dev:MediaWiki:AjaxRC.js'});;(function(window,$,mw){'use strict';var buttonStart=typeof window.BackToTopStart==='number'?window.BackToTopStart:window.innerHeight,scrollSpeed=typeof window.BackToTopSpeed==='number'?window.BackToTopSpeed:600,fadeSpeed=typeof window.BackToTopFade==='number'?window.BackToTopFade:600,$button,cc=mw.config.get('wgSassParams')['color-community-header'],theme;if(window.BackToTopLoaded){return;}window.BackToTopLoaded=!0;function init(){$button.children('div').hide();$(window).scroll($.throttle(100,function(){if($(this).scrollTop()>buttonStart){switch(fadeSpeed){case 0:$button.children('div').show();break;default:$button.children('div').fadeIn(fadeSpeed);break;}}else{switch(fadeSpeed){case 0:$button.children('div').hide();break;default:$button.children('div').fadeOut(fadeSpeed);break;}}}));mw.hook('dev.BackToTopButton').fire($button);}function click(){$('body, html').animate({scrollTop:0},scrollSpeed);return false;}
function modernPreload(l){if(++_loaded==l){modernInit(window.dev.wds,window.dev.colors);}}function modernInit(wds,colors){cc=colors.parse(cc);theme=cc.isBright()?'#000000':'#ffffff';cc=cc.hex();$button=$('<div>',{id:'BackToTopBtn',append:[$('<div>',{css:{background:cc,color:theme,},'html':wds.icon('menu-control')})],click:click}).appendTo(document.body);$.proxy(modernReposition,$button.children('div'))();$(window).on('resize',$.throttle(100,$.proxy(modernReposition,$button.children('div'))));init();}function modernReposition(){this.css({'right':$(window).width()/100*5,'bottom':$('#WikiaBar #WikiaBarWrapper').height()+8});}function arrowInit(){$button=$('<li>',{click:click,id:'backtotop'}).append($('<img>',{src:'https://images.wikia.nocookie.net/dev/images/'+((theme==='black'||window.BackToTopArrowBlack)?'f/f2/BlackToTopArrow':'c/c3/BackToTopArrow_white')+'.png'})).appendTo('#WikiaBarWrapper .toolbar > .tools');init();}function oldInit(i18n){$button=$('<li>',{click:click,id:'backtotop'}
).append($('<button>',{css:{height:'20px'},type:'button',text:(typeof window.BackToTopText==='string'&&window.BackToTopText)||i18n.msg('backToTop').plain()})).appendTo('#WikiaBarWrapper .toolbar > .tools');init();}if(window.BackToTopModern){var _loaded=0;[{h:'wds',s:'u:dev:WDSIcons/code.js'},{h:'colors',s:'u:dev:Colors/code.js'}].forEach(function(lib,i,a){importArticle({type:'script',article:lib.s});mw.hook('dev.'+lib.h).add($.proxy(modernPreload,null,a.length));});}else if(window.BackToTopArrow){arrowInit();}else{importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('BackToTopButton').done(oldInit);});}importArticle({type:'style',article:'u:dev:MediaWiki:BackToTopButton.css'});}(this,jQuery,mediaWiki));;;(function(module,mw,$,undefined){'use strict';var translations=$.extend(true,{ar:{and:'و',second:'ثانية',seconds:'ثواني',minute:'دقيقة',minutes:'دقائق',hour:'ساعة',hours:'ساعات',
day:'يوم',days:'أيام'},be:{and:'і',second:'секунда',seconds:'секунд',minute:'хвіліна',minutes:'хвілін',hour:'гадзіну',hours:'гадзін',day:'дзень',days:'дзён'},ca:{and:'i',second:'segon',seconds:'segons',minute:'minut',minutes:'minuts',hour:'hora',hours:'hores',day:'dia',days:'dies'},de:{and:'und',second:'Sekunde',seconds:'Sekunden',minute:'Minute',minutes:'Minuten',hour:'Stunde',hours:'Stunden',day:'Tag',days:'Tage'},en:{and:'and',second:'second',seconds:'seconds',minute:'minute',minutes:'minutes',hour:'hour',hours:'hours',day:'day',days:'days'},el:{and:'και',second:'δευτερόλεπτο',seconds:'δευτερόλεπτα',minute:'λεπτό',minutes:'λεπτά',hour:'ώρα',hours:'ώρες',day:'ημέρα',days:'ημέρες'},es:{and:'y',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'día',days:'días'},fr:{and:'et',second:'seconde',seconds:'secondes',minute:'minute'
,minutes:'minutes',hour:'heure',hours:'heures',day:'jour',days:'jours'},hi:{and:'और',second:'सेकंड',seconds:'सेकंड',minute:'मिनट',minutes:'मिनट',hour:'घंटा',hours:'घंटे',day:'दिन',days:'दिन'},hu:{and:'és',second:'másodperc',seconds:'másodperc',minute:'perc',minutes:'perc',hour:'óra',hours:'óra',day:'nap',days:'nap'},id:{and:'dan',second:'detik',seconds:'detik',minute:'menit',minutes:'menit',hour:'jam',hours:'jam',day:'hari',days:'hari'},it:{and:'e',second:'secondo',seconds:'secondi',minute:'minuto',minutes:'minuti',hour:'ora',hours:'ore',day:'giorno',days:'giorni'},ja:{and:'',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時間',hours:'時間',day:'日',days:'日'},ko:{and:' ',second:'초',seconds:'초',minute:'분',minutes:'분',hour:'시간',hours:'시간',day:'일',days:'일'},ms:{and:'dan',second:'saat',seconds:'saat',minute:'minit',minutes:'minit',hour:'jam',hours:'jam',day:'hari',days:'hari'},
nl:{and:'en',second:'seconde',seconds:'seconden',minute:'minuut',minutes:'minuten',hour:'uur',hours:'uur',day:'dag',days:'dagen'},pl:{and:'i',second:'sekunda',seconds:'sekund(y)',minute:'minuta',minutes:'minut(y)',hour:'godzina',hours:'godzin(y)',day:'dzień',days:'dni'},pt:{and:'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},'pt-br':{and:'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},ro:{and:'și',second:'secundă',seconds:'secunde',minute:'minut',minutes:'minute',hour:'oră',hours:'ore',day:'zi',days:'zile',},ru:{and:'и',second:'секунда',seconds:'секунд',minute:'минута',minutes:'минут',hour:'час',hours:'часов',day:'день',days:'дней'},sr:{and:'i',second:'sekundu',seconds:'sekunde/-i',minute:'minutu',minutes:'minute/-a',hour:'sat',hours:'sata/-i',day:'dan',days:'dana'},tl:{and:'at',second:
'segundo',seconds:'mga segundo',minute:'minuto',minutes:'mga minuto',hour:'oras',hours:'mga oras',day:'araw',days:'mga araw'},tr:{and:'ve',second:'saniye',seconds:'saniye',minute:'dakika',minutes:'dakika',hour:'saat',hours:'saat',day:'gün',days:'gün'},uk:{and:'та',second:'секунда',seconds:'секунд',minute:'хвилина',minutes:'хвилин',hour:'годину',hours:'годин',day:'день',days:'днів'},vi:{and:'và',second:'giây',seconds:'giây',minute:'phút',minutes:'phút',hour:'giờ',hours:'giờ',day:'ngày',days:'ngày'},zh:{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'时',hours:'时',day:'天',days:'天'},'zh-tw':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'},'zh-hk':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'}},module.translations||{}),i18n=translations[mw.config.get('wgContentLanguage')]||translations.
en;var countdowns=[];var NO_LEADING_ZEROS=1,SHORT_FORMAT=2,NO_ZEROS=4;function output(i,diff){var delta,result,parts=[];delta=diff%60;result=' '+i18n[delta===1?'second':'seconds'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/60);delta=diff%60;result=' '+i18n[delta===1?'minute':'minutes'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/60);delta=diff%24;result=' '+i18n[delta===1?'hour':'hours'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/24);result=' '+i18n[diff===1?'day':'days'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(diff+result);result=parts.pop();if(countdowns[i].opts&NO_LEADING_ZEROS){while(parts.length&&parts[0][0]==='0'){parts.shift();}}if(countdowns[i].opts&NO_ZEROS){parts=parts.filter(function(part){return part[0]!=='0';});}if(parts.length){if(countdowns[i].opts
&SHORT_FORMAT){result=parts.join(' ')+' '+result;}else{result=parts.join(', ')+' '+i18n.and+' '+result;}}countdowns[i].node.text(result);}function end(i){var c=countdowns[i].node.parent();switch(c.attr('data-end')){case'remove':c.remove();return true;case'stop':output(i,0);return true;case'toggle':var toggle=c.attr('data-toggle');if(toggle&&toggle=='next'){c.next().css('display','inline');c.css('display','none');return true;}if(toggle&&$(toggle).length){$(toggle).css('display','inline');c.css('display','none');return true;}break;case'callback':var callback=c.attr('data-callback');if(callback&&$.isFunction(module[callback])){output(i,0);module[callback].call(c);return true;}break;}countdowns[i].countup=!0;output(i,0);return false;}function update(){var now=Date.now();var countdownsToRemove=[];$.each(countdowns.slice(0),function(i,countdown){var diff=Math.floor((countdown.date-now)/1000);if(diff<=0&&!countdown.countup){if(end(i))countdownsToRemove.push(i);}else{output(i,Math.abs(diff))
;}});var x;while((x=countdownsToRemove.pop())!==undefined){countdowns.splice(x,1);}if(countdowns.length){window.setTimeout(function(){update();},1000);}}function getOptions(node){var text=node.parent().attr('data-options'),opts=0;if(text){if(/no-leading-zeros/.test(text)){opts|=NO_LEADING_ZEROS;}if(/short-format/.test(text)){opts|=SHORT_FORMAT;}if(/no-zeros/.test(text)){opts|=NO_ZEROS;}}return opts;}function init(){var countdown=$('.countdown:not(.handled)');if(!countdown.length)return;$('.nocountdown').css('display','none');countdown.css('display','inline').find('.countdowndate').each(function(){var $this=$(this),date=(new Date($this.text())).valueOf();if(isNaN(date)){$this.text('BAD DATE');return;}countdowns.push({node:$this,opts:getOptions($this),date:date,});});countdown.addClass('handled');if(countdowns.length){update();}}mw.hook('wikipage.content').add(init);}(window.countdownTimer=window.countdownTimer||{},mediaWiki,jQuery));;(function(){if(window.Discord&&Discord.init)return;
var isUCP=mw.config.get('wgVersion').startsWith('1.33.');var ucpOnRailReadyModuleName=isUCP?mw.loader.getModuleNames().find(function(name){return name.startsWith('onRailReady-');}):undefined;var blankImgUrl=mw.config.get('wgBlankImgUrl');var canNativelyLazyLoadImages=window.HTMLImageElement.prototype.hasOwnProperty('loading');var shouldPolyfillLazyLoadImages=!canNativelyLazyLoadImages&&window.hasOwnProperty('IntersectionObserver');var extendFrom=window.Discord instanceof Node?{}:window.Discord;window.Discord=$.extend({$rail:$('#WikiaRail'),loaded:7,onload:function(type,arg){switch(type){case'i18n':arg.loadMessages('Discord').then(this.onload.bind(this,'lang'));break;case'lang':this.i18n=arg;break;case'api':this.api=new mw.Api();this.getMessages();break;}if(--this.loaded)return;this.init();},requests:{},defaults:{theme:'light',roles:{}},messages:{},getMessages:function(){this.api.get({action:'query',list:'allpages',apnamespace:8,apprefix:'Custom-Discord-',aplimit:'max'}).then(this.
onPagesLoaded.bind(this)).then(this.handleMessages.bind(this));},onPagesLoaded:function(data){var first=data.query.allpages[0],index=first?first.title.indexOf(':')+1:null,allpages=data.query.allpages.map(function(page){return page.title.slice(index);});return this.api.get({action:'query',meta:'allmessages',amlang:mw.config.get('wgUserLanguage'),ammessages:allpages.join('|')});},handleMessages:function(data){window.dev=window.dev||{};dev.i18n=dev.i18n||{};dev.i18n.overrides=dev.i18n.overrides||{};dev.i18n.overrides.Discord=dev.i18n.overrides.Discord||{};if(data.query){for(var i in data.query.allmessages){var message=data.query.allmessages[i],title=message.name.slice('Custom-Discord-'.length),content=message['*'];if(message.missing==='')continue;if(title.indexOf('-')!=-1){var split=title.split('-'),key=split.pop();title=split[0];this.messages[title]=this.messages[title]||{};this.messages[title][key]=content;}else{this.messages[title]=this.messages[title]||content;dev.i18n.overrides.
Discord[title]=dev.i18n.overrides.Discord[title]||content;}delete this.defaults[title];}}for(var key in this.defaults){var value=this.defaults[key];if(!this.messages[key]){if(value instanceof Error){console.error(value);return;}this.messages[key]=value;}}this.onload('messages');},fetchWidgetData:function(id){if(this.requests[id])return this.requests[id];if(window.Discord&&Discord.apiProxyBaseUrl&&Discord.apiProxyBaseUrl.startsWith('https://')){this.requests[id]=$.ajax(Discord.apiProxyBaseUrl+'/guilds/'+id+'/widget.json',{dataType:'json',headers:{'X-City-Id':mw.config.get('wgCityId')}}).then(null,function(){return $.getJSON('https://discord.com/api/guilds/'+id+'/widget.json');});}else{this.requests[id]=$.getJSON('https://discord.com/api/guilds/'+id+'/widget.json');}return this.requests[id];},handleWidgetData:function(data){this.railWidgetData=data;this.addToRail();},mapMessages:function(){for(var key in this.messages.roles){var value=this.messages.roles[key];this.messages.roles[key]=
value.match(/\b[1-9]\d{16,19}\b/g);}},logo:function(){return{type:'svg',attr:{viewBox:'0 0 28 20',height:'18',width:'18'},children:[{type:'path',attr:{d:
'm20.6644 20s-0.863-1.0238-1.5822-1.9286c3.1404-0.8809 4.339-2.8333 4.339-2.8333-0.9828 0.6429-1.9178 1.0953-2.7568 1.4048-1.1986 0.5-2.3493 0.8333-3.476 1.0238-2.3014 0.4286-4.411 0.3095-6.2089-0.0238-1.36649-0.2619-2.54114-0.6429-3.52402-1.0238-0.55137-0.2143-1.15069-0.4762-1.75-0.8095-0.07192-0.0477-0.14384-0.0715-0.21575-0.1191-0.04795-0.0238-0.07192-0.0476-0.09589-0.0714-0.43151-0.2381-0.67124-0.4048-0.67124-0.4048s1.15069 1.9048 4.19521 2.8095c-0.71918 0.9048-1.60617 1.9762-1.60617 1.9762-5.29794-0.1667-7.31164-3.619-7.31164-3.619 0-7.6666 3.45205-13.8808 3.45205-13.8808 3.45206-2.5714 6.73635-2.49997 6.73635-2.49997l0.2397 0.285711c-4.31509 1.23808-6.30481 3.11902-6.30481 3.11902s0.52739-0.28572 1.41438-0.69047c2.56507-1.11904 4.60273-1.42856 5.44183-1.49999 0.1438-0.02381 0.2637-0.04762 0.4075-0.04762 1.4623-0.190471 3.1164-0.23809 4.8425-0.04762 2.2773 0.26191 4.7226 0.92857 7.2157 2.2857 0 0-1.8938-1.7857-5.9692-3.02378l0.3356-0.380948s3.2843-0.0714279 6.7363 2.49997c0 0 3.4521 6.21423 3.4521 13.8808 0 0-2.0377 3.4523-7.3356 3.619zm-11.1473-11.1189c-1.36644 0-2.4452 1.19044-2.4452 2.64284s1.10274 2.6428 2.4452 2.6428c1.36648 0 2.44518-1.1904 2.44518-2.6428 0.024-1.4524-1.0787-2.64284-2.44518-2.64284zm8.74998 0c-1.3664 0-2.4452 1.19044-2.4452 2.64284s1.1028 2.6428 2.4452 2.6428c1.3665 0 2.4452-1.1904 2.4452-2.6428s-1.0787-2.64284-2.4452-2.64284z'
,}}]};},avatar:function(member,ext,size){if(member.alt_avatar_url)return member.alt_avatar_url+'?size='+size;if(!member.avatar)return member.avatar_url;return'https://cdn.discordapp.com/avatars/'+member.id+'/'+member.avatar+'.'+ext+'?size='+size;},getRandomId:function(prefix,i){var charset='1234567890abcdef',len=charset.length;while(i--){prefix+=charset[Math.floor(Math.random()*len)];}return prefix;},buildWidget:function(data){var widget=dev.ui({children:[this.buildTitle(data),{type:'div',classes:['discord-widget-container'],attr:{id:this.getRandomId('discord-widget-',64),role:'complementary'},style:data.size||{},children:[{type:'div',classes:['discord-widget'],children:[{type:'div',classes:['widget','widget-theme-'+(data.theme||this.messages.theme)],children:[this.buildHeader(data),this.buildBody(data),this.buildFooter(data)]}]}]}]});if(shouldPolyfillLazyLoadImages){var avatarLazyLoadIntersectionObserver=new IntersectionObserver(function(entries){entries.forEach(function(entry){if(
entry.intersectionRatio===1){entry.target.src=entry.target.dataset.src;delete entry.target.dataset.src;if(entry.target.dataset.srcset){entry.target.srcset=entry.target.dataset.srcset;delete entry.target.dataset.srcset;}avatarLazyLoadIntersectionObserver.unobserve(entry.target);}});},{root:widget.querySelector('.widget-body'),rootMargin:'46px 0px',threshold:1});widget.querySelectorAll('.widget-member-avatar-img').forEach(function(img){avatarLazyLoadIntersectionObserver.observe(img);});}return widget;},buildTitle:function(data){return{type:'div',classes:['title-container'],condition:data.header!='0',children:[{type:'h2',classes:['title','has-icon'],children:[this.logo(),{type:'span',html:this.i18n.msg('header',data.name).parse()}]}]};},buildHeader:function(data){return{type:'div',classes:['widget-header'],children:[{type:'a',classes:['widget-logo'],attr:{href:'https://discord.com/?utm_source=Discord%20Widget&utm_medium=Logo',target:'_blank'}},{type:'span',classes:['widget-header-count'],
condition:data.members,html:this.i18n.msg('online',data.presence_count||data.members&&data.members.length).parse()}]};},buildBody:function(data){var roles=data.members?this.groupMemberRoles(data.members):null;return{type:'div',classes:['widget-body'].concat(data.members?[]:['body-loading']),children:data.members?roles.map(this.buildRoleContainer.bind(this,data)):[]};},buildRoleContainer:function(data,role){var name=role[0],members=role[1],defaultRole=role[2];return{type:'div',classes:['widget-role-container'],attr:{'data-name':name},condition:members.length,children:[{type:'div',classes:['widget-role-name'],attr:$.extend({'data-name':name},defaultRole?{'data-default':'true'}:{}),html:name}].concat(members.map(this.buildUserChip.bind(this,data)))};},buildUserChip:function(data,member){var avatarAttrs={src:this.avatar(member,'png',32)};if(member.alt_avatar_url||member.avatar){avatarAttrs.srcset=this.avatar(member,'png',64)+' 2x';}if(canNativelyLazyLoadImages){avatarAttrs.loading='lazy';}
else if(shouldPolyfillLazyLoadImages){avatarAttrsSrcset=avatarAttrs.srcset;avatarAttrs={'src':blankImgUrl,'data-src':avatarAttrs.src};if(avatarAttrsSrcset)avatarAttrs['data-srcset']=avatarAttrsSrcset;}return{type:'div',classes:['widget-member'],children:[{type:'div',classes:['widget-member-avatar'],children:[{type:'img',classes:['widget-member-avatar-img'],attr:avatarAttrs},{type:'span',classes:['widget-member-status','widget-member-status-'+member.status]}]},{type:'span',classes:['widget-member-name'],text:member.nick||member.username}],events:{click:this.showMemberModal.bind(this,data,member)}};},buildFooter:function(data){return{type:'div',classes:['widget-footer'],children:[{type:'span',classes:['widget-footer-info'],html:this.i18n.msg('footer',this.messages.guidelines).parse(),condition:this.messages.guidelines||this.messages.footer},{type:'a',classes:['widget-btn-connect'],condition:data.invite||this.messages.invite||data.instant_invite,attr:{href:data.invite||this.messages.
invite||data.instant_invite,target:'_blank'},html:this.i18n.msg('join').parse()}]};},groupMemberRoles:function(members){var grouped=[],indices={},defaultRole=this.i18n.msg('users').plain(),roles=Object.keys(this.messages.roles);members.sort(function(a,b){return(a.nick||a.username).localeCompare(b.nick||b.username);});if(this.messages.order){var order=this.messages.order.split(',').map(function(name){return name.trim();});roles.sort(function(a,b){var aIndex=order.indexOf(a);if(aIndex==-1)return 1;var bIndex=order.indexOf(b);if(bIndex==-1)return-1;return aIndex-bIndex;});}for(var i in roles){var role=roles[i];indices[role]=grouped.push([role,[]])-1;}indices[defaultRole]=grouped.push([defaultRole,[],true])-1;for(var i in members){var member=members[i],assigned=!1;for(var role in this.messages.roles){var ids=this.messages.roles[role];if(ids.includes(member.id)){grouped[indices[role]][1].push(member);assigned=!0;break;}}if(!assigned){grouped[indices[defaultRole]][1].push(member);}}
return grouped;},showMemberModal:function(data,member){var game=member.game||{};$.showCustomModal(member.nick||member.username,dev.ui({type:'div',classes:['discord-member-modal-content'],children:[{type:'div',classes:['avatar-container','loading'],children:[{type:'a',classes:['avatar-link'],attr:{href:this.avatar(member,'png',2048),target:'_blank'},children:[{type:'img',classes:['avatar'],attr:{src:this.avatar(member,'png',256)},events:{load:function(){this.parentElement.parentElement.classList.remove('loading');}}}]}]},{type:'div',classes:['details'],children:[{type:'div',classes:['username'],condition:member.id.length>=17,children:[{type:'span',classes:['name'],text:member.username},{type:'span',classes:['discriminator'],text:'#'+member.discriminator}]},{type:'div',classes:['playing'],condition:game.name,html:this.i18n.msg(game.name=='Spotify'?'listening':'playing',game.name).parse()}]}]}),{id:'discord-member-modal',width:'invalid so that the CSS can take over lol',callback:function(
$modal){$modal.addClass('discord-member-modal-theme-'+(data.theme||this.messages.theme));}.bind(this)});},addToRail:function(data){if(!this.$rail.exists())return;$('.discord-module').remove();if(!this.railWidgetData){this.fetchWidgetData(this.messages.id).then(this.handleWidgetData.bind(this));}var widget=this.buildWidget(this.railWidgetData||{}),railModule=dev.ui({type:'section',classes:['rail-module','discord-module'],attr:{'data-widget-state':'loading'},children:[widget]}),$ads=$('#top-right-boxad-wrapper, #NATIVE_TABOOLA_RAIL').last(),$jsrt=$('.content-review-module');if($ads.exists()){$ads.after(railModule);}else if($jsrt.exists()){$jsrt.after(railModule);}else{this.$rail.prepend(railModule);}this.onRenderedWidget(railModule);mw.hook('Discord.widget.rail').fire(railModule);},replaceWidget:function(_,elem){elem.dataset.widgetState='loading';var id=elem.getAttribute('data-id')||this.messages.id,theme=elem.getAttribute('data-theme')||this.messages.theme,width=elem.getAttribute(
'data-width'),height=elem.getAttribute('data-height'),invite=elem.getAttribute('data-invite'),header=elem.getAttribute('data-header');if(!id)return;this.fetchWidgetData(id).then(function(data){data.theme=theme;data.size={};if(width){data.size.width=width;}if(height){data.size.height=height;}if(invite){data.invite=invite;}else{data.invite=data.instant_invite;}if(header){data.header=header;}var widget=this.buildWidget(data);$(elem).empty().append(widget);this.onRenderedWidget(elem);}.bind(this));},onRenderedWidget:function(widget){var container=widget.querySelector('.discord-widget-container'),discord=container.querySelector('.discord-widget'),body=discord.querySelector('.widget-body'),largest=Array.from(body.children).sort(this.sortRoleContainers.bind(this))[0];if(!largest)return;var members=largest.querySelectorAll('.widget-member'),initial=members[0].offsetTop,count=0;for(var i=0;i<members.length;i++){if(members[i].offsetTop>initial)break;count++;}discord.classList.add(
'resolved-columns');this.addCSS(this.createNameDirectionStyles(count,container.id));widget.dataset.widgetState='loaded';mw.hook('Discord.widget').fire(widget);},sortRoleContainers:function(a,b){return b.children.length-a.children.length;},addCSS:function(styles){mw.util.addCSS(styles);},createNameDirectionStyles:function(count,id){var half=Math.floor(count/2),i=half,selectors=[];while(i--){selectors.push(this.createDirectionSelector(count,id,i-half+2));}return selectors.join(',\n')+'{\n\tpadding: 0 32px 0 8px;\n\tright: 4px;\n}';},createDirectionSelector:function(count,id,half){var n=half==0?'':half>0?'+'+half:'-'+Math.abs(half);return'#'+id+' .widget-member:nth-child('+count+'n'+n+') .widget-member-name';},replaceWidgets:function($container){$container.find('.DiscordWidget:not([data-widget-state])').each(this.replaceWidget.bind(this));},getHeight:function(elem){var style=getComputedStyle(elem);return elem.clientHeight+parseInt(style.marginTop)+parseInt(style.marginBottom);},reflow:
function(elem,columns,force){if(this.reflowing){this.reflowing=!1;if(!force){return;}}this.reflowing=!0;var full=0,sum=0,overhead=5,children=elem.children,i=children.length;elem.style.maxHeight='';if(innerWidth>1023)return;while(i--){full+=this.getHeight(children[i]);}var partition=full/columns;for(var i=0;i<children.length;i++){sum+=this.getHeight(children[i]);if(sum>partition){break;}}elem.style.maxHeight=(sum+overhead)+'px';},patchStupidRail:function(){if(!this.$rail||!window.MutationObserver||navigator.maxTouchPoints===0)return;var rail=this.$rail.get(0);rail.parentElement.style.columnCount='auto';rail.style.display='flex';rail.style.flexDirection='column';rail.style.flexWrap='wrap';this.reflow(rail,2,true);new MutationObserver(this.reflow.bind(this,rail,2,false)).observe(rail,{childList:!0,subtree:!0,attributes:!0});},init:function(){this.mapMessages();if(this.messages.id){this.addToRail();}this.replaceWidgets(mw.util.$content);mw.hook('wikipage.content').add(this.
replaceWidgets.bind(this));this.patchStupidRail();}},extendFrom);if(!Discord.$rail.exists()||Discord.$rail.hasClass(isUCP?'is-ready':'loaded')){Discord.onload();}else{if(ucpOnRailReadyModuleName!=null){mw.loader.using(ucpOnRailReadyModuleName,function(require){require(ucpOnRailReadyModuleName).onRailReady(Discord.onload.bind(Discord));});}else{Discord.$rail.on('afterLoad.rail',Discord.onload.bind(Discord));}}mw.hook('dev.ui').add(Discord.onload.bind(Discord));mw.hook('dev.i18n').add(Discord.onload.bind(Discord,'i18n'));mw.loader.using('mediawiki.api').then(Discord.onload.bind(Discord,'api'));importArticles({type:'script',articles:['u:dev:MediaWiki:I18n-js/code.js','u:dev:MediaWiki:UI-js/code.js']});var style=importArticle({type:'style',article:'u:dev:MediaWiki:Discord.css'})[0];if(style){style.onload=Discord.onload.bind(Discord);}else{Discord.onload();}})();;(function(){'use strict';if(window.DiscussionsActivityLoaded)return;window.DiscussionsActivityLoaded=!0;console.log(
'DiscussionsActivity v0.9.7.1');var config=window.mw.config.get(['wgCanonicalNamespace','wgCityId','wgScriptPath','wgTitle','wgUserGroups','wgUserName']);var i18n;var isMod;var canBlock;var wallsEnabled=!1;var timeout;function escapeHTML(str){return(str?window.mw.html.escape(str):'');}function epochToTimeAgo(epoch){var elapsed=(Math.floor(new Date().getTime())-new Date(epoch*1000))/1000;var factors=[['seconds',60],['minutes',60],['hours',24],['days',30],['months',12],['years']];var unit;var i=0;for(;i<factors.length&&elapsed>=factors[i][1];i++){elapsed/=factors[i][1];}unit=factors[i][0];elapsed=Math.floor(elapsed);return i18n(unit+'_ago_'+(elapsed>1?'plural':'singular'),elapsed).escape();}function postInfo(post){var data={title:escapeHTML(post._embedded.thread[0].title),text:escapeHTML(post.rawContent.length>250?post.rawContent.substring(0,250).trim()+'...':post.rawContent),userName:escapeHTML(post.createdBy.name),userNameEncoded:null,userID:post.createdBy.id,avatarURL:post.
createdBy.avatarUrl,time:epochToTimeAgo(post.creationDate.epochSecond),image:post._embedded.contentImages[0],embed:post._embedded.openGraph,messageID:post.id,threadID:post.threadId,forumName:escapeHTML(post.forumName),forumID:post.forumId,isReply:post.isReply,isReported:(isMod?post.isReported:undefined),isLocked:post._embedded.thread[0].isLocked,isDeleted:null,isMessageDeleted:post.isDeleted,isThreadDeleted:post._embedded.thread[0].isDeleted,deleter:null,deleterID:null,tags:[]};data.userNameEncoded=data.userName.replace(/ /g,'_');if(!data.avatarURL){data.avatarURL='https://vignette.wikia.nocookie.net/messaging/images/1/19/Avatar.jpg/revision/latest';}else if(data.avatarURL.indexOf('/messaging/')>-1){data.avatarURL=data.avatarURL.replace(/[^jpg]*$/,'')+'/revision/latest';}data.isDeleted=Boolean(data.isThreadDeleted||data.isMessageDeleted);if(data.isMessageDeleted){data.deleter=post.lastDeletedBy.name;data.deleterID=post.lastDeletedBy.id;}if(!post.isReply&&post._embedded&&post._embedded.
thread&&post._embedded.thread[0]&&post._embedded.thread[0].tags){post._embedded.thread[0].tags.forEach(function(tag){data.tags.push({title:escapeHTML(tag.articleTitle)});});}return data;}function headerItem(data){var icon={class:['new','talk'],title:[i18n('icon_title_thread').escape(),i18n('icon_title_reply').escape()]};var i=(data.isReply?1:0);var header='<img class="'+icon.class[i]+' sprite" src="data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEAAAEALAAAAAABAAEAQAICTAEAOw%3D%3D" alt="'+icon.title[i]+'" title="'+icon.title[i]+'" width="16" height="16">'+' <strong><a class="title rda-title" href="'+config.wgScriptPath+'/f/p/'+data.threadID+'">'+data.title+'</a></strong>'+' '+i18n('in').escape()+' <a class="rda-category" href="'+config.wgScriptPath+'/f?catId='+data.forumID+'&sort=latest">'+data.forumName+'</a>';return header;}function contentRow(data){var subtitle=i18n(data.isReply?'commented_by':'created_by').escape();var blockButton=(canBlock?' | <a class="rda-block" href="'+
config.wgScriptPath+'/wiki/Special:Block/'+data.userNameEncoded+'">'+i18n('block').escape()+'</a>':'');var talk={class:['rda-talk','rda-wall'],link:['User_talk','Message_Wall'],text:[i18n('talk').escape(),i18n('wall').escape()]};var i=(wallsEnabled?1:0);var row='<tr>'+'<td>'+'<img src="'+data.avatarURL+'/scale-to-width-down/50" width="30" height="30" class="avatar rda-avatar" alt="'+data.userName+'">'+'</td>'+'<td>'+'<p>'+'<cite>'+'<span class="subtle">'+subtitle+'</span>'+' <a class="real-name rda-username" href="'+config.wgScriptPath+'/f/u/'+data.userID+'">'+data.userName+'</a> (<a class="'+talk.class[i]+'" href="'+config.wgScriptPath+'/wiki/'+talk.link[i]+':'+data.userNameEncoded+'">'+talk.text[i]+'</a> | <a class="rda-contribs" href="'+config.wgScriptPath+'/wiki/Special:Contributions/'+data.userNameEncoded+'">'+i18n('contribs').escape()+'</a>'+blockButton+')'+' <a class="subtle rda-time" href="'+config.wgScriptPath+'/f/p/'+data.threadID+'/r/'+data.messageID+'">'+data.time+'</a>'+
'</cite>'+'</p>'+'<p>'+'<span class="rda-content">'+data.text+'</span>'+'</p>'+'</td>'+'</tr>';return row;}function getThumbnail(h,w){if(w>200){h=Math.floor(h*(200/w));w=200;}return{height:h,width:w};}function imageRow(image,table){if(!image){return;}var thumbnail=getThumbnail(image.height,image.width);var cellContent='<ul class="activityfeed-inserted-media rda-inserted-media reset">'+'<li>'+'<a data-image-link="" href="'+image.url+'">'+'<img src="'+image.url+'/scale-to-width-down/200" width="'+thumbnail.width+'" height="'+thumbnail.height+'" class="rda-image">'+'</a>'+'</li>'+'</ul>';var row=table.insertRow(-1);row.setAttribute('data-type','inserted-image');row.insertCell(0);var cell2=row.insertCell(1);cell2.innerHTML=cellContent;}function embedRow(embed,table){if(!embed){return;}var title=escapeHTML(embed[0].title);var url=escapeHTML(embed[0].url);var thumbnail=getThumbnail(embed[0].imageHeight,embed[0].imageWidth);var separator=document.getElementsByClassName(
'page-header__separator')[0];var separatorColor=window.getComputedStyle(separator).backgroundColor;var fragment=document.createRange().createContextualFragment('<a target="_blank" style="border-color: '+separatorColor+';" title="'+url+'" href="'+url+'" class="og-container large-image-card-mobile small-image-card-desktop ember-view"><!---->'+'<div class="og-image-wrapper">'+'<img src="'+embed[0].imageUrl+'/scale-to-width-down/200" width="'+thumbnail.width+'" height="'+thumbnail.height+'" alt="'+title+'" class="og-image rda-image"><!---->'+'</div>'+'<div class="og-texts">'+'<h3 class="og-title">'+title+'</h3>'+'<div class="og-description subtle">'+escapeHTML(embed[0].description)+'</div>'+'<div class="og-site-name subtle">'+escapeHTML(embed[0].siteName)+'</div>'+'</div>'+'</a>');var imageWrapper=fragment.firstChild.childNodes[1];if(embed[0].videoUrl){imageWrapper.classList.add('og-video-thumbnail');}var row=table.insertRow(-1);row.setAttribute('data-type','inserted-image');row.insertCell
(0);var cell2=row.insertCell(1);cell2.appendChild(fragment);}function statusRow(data,table){var status={isDeleted:{type:'deleted',icon:'trash',iconTitle:i18n('icon_title_deleted').escape(),subtitle:(data.isMessageDeleted?i18n('message_deleted_by').escape()+' <a class="rda-deleter" href="'+config.wgScriptPath+'/f/u/'+data.deleterID+'">'+data.deleter+'</a>':i18n('parent_thread_deleted').escape()),class:'rda-deleted'},isReported:{type:'reported',icon:'error',iconTitle:i18n('icon_title_reported').escape(),subtitle:i18n('message_reported').escape(),class:'rda-reported'},isLocked:{type:'locked',icon:'lock',iconTitle:i18n('icon_title_locked').escape(),subtitle:i18n(data.isReply?'parent_thread_locked':'thread_locked').escape(),class:'rda-locked'}};var key=Object.keys(status).filter(function(e){return data[e]===!0;})[0];if(!key){return;}var textSpan=table.getElementsByClassName('rda-content')[0];var cellContent='<cite>'+'<img class="'+status[key].icon+' sprite rda-icon-'+status[key].type+
'" src="data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEAAAEALAAAAAABAAEAQAICTAEAOw%3D%3D" alt="'+status[key].iconTitle+'" title="'+status[key].iconTitle+'" width="16" height="16" />'+'<span class="subtle">'+status[key].subtitle+'</span>'+'</cite>';var row=table.insertRow(-1);row.insertCell(0);var cell2=row.insertCell(1);cell2.className='rda-status-'+status[key].type;cell2.innerHTML=cellContent;textSpan.classList.add(status[key].class);}function tagsRow(tags,table){if(tags.length===0){return;}var row=table.insertRow(-1);row.insertCell(0);var cell2=row.insertCell(1);var iconHoverText=i18n('icon_title_tags').escape();cell2.className='rda-tags';cell2.innerHTML='<img class="message sprite rda-icon-tags" src="data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEAAAEALAAAAAABAAEAQAICTAEAOw%3D%3D" alt="'+iconHoverText+'" title="'+iconHoverText+'" />'+tags.map(function(elem){return elem.title;}).join(', ');}function buildItem(post,ul){var data=postInfo(post);var header=headerItem(data);
var content=contentRow(data);var itemFrag=document.createRange().createContextualFragment('<li class="activity-type-discussion rda-entry">'+header+'<table class="wallfeed rda-table">'+'<tbody>'+content+'</tbody>'+'</table>'+'</li>');var li=itemFrag.firstChild;var table=li.getElementsByTagName('table')[0];imageRow(data.image,table);embedRow(data.embed,table);tagsRow(data.tags,table);statusRow(data,table);ul.appendChild(itemFrag);}function buildList(response,content){var listFrag=document.createRange().createContextualFragment('<ul class="activityfeed rda-feed reset" id="myhome-activityfeed"></ul>');var ul=listFrag.firstChild;for(var i=0;i<response.length;i++){buildItem(response[i],ul);}content.innerHTML='';content.appendChild(listFrag);}function getDiscussions(content,loadingElement){loadingElement=(loadingElement||document.getElementById('rda-chbx-autorefresh'));loadingElement.classList.add('rda-loading');if(timeout){clearTimeout(timeout);}var interval=(window.rdaRefreshInterval>=30000
?window.rdaRefreshInterval:60000);var viewableOnly=(isMod&&localStorage.getItem('rdaShowDeleted')==='false'?true:!isMod);var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){content.textContent=i18n('error_no_connection').plain();};request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){var response=JSON.parse(request.responseText)._embedded['doc:posts'];buildList(response,content);}else{content.textContent=i18n('error_no_connection').plain();}var autoRefresh=(localStorage.getItem('rdaAutoRefresh')==='false'?false:true);timeout=(autoRefresh?setTimeout(getDiscussions,interval,content):timeout);loadingElement.classList.remove('rda-loading');}};request.open('GET','https://services.fandom.com/discussion/'+config.wgCityId+'/posts?limit=50&viewableOnly='+viewableOnly,true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function checkboxes(content){var header=document.
getElementsByClassName('page-header__main')[0];var chbxsFrag=document.createRange().createContextualFragment('<div id="rda-checkboxes" class="page-header__subtitle"></div>');var div=chbxsFrag.firstChild;function makeChbx(name,id,cookie){var frag=document.createRange().createContextualFragment('<span id="'+id+'">'+'<input type="checkbox" />'+'<label>'+name+'</label>'+'</span>');if(localStorage.getItem(cookie)!=='false'){var input=frag.firstChild.childNodes[0];input.checked=!0;}div.appendChild(frag);}makeChbx(i18n('checkbox_auto_refresh').escape(),'rda-chbx-autorefresh','rdaAutoRefresh');if(isMod){makeChbx(i18n('checkbox_show_deleted').escape(),'rda-chbx-showdeleted','rdaShowDeleted');}header.appendChild(chbxsFrag);var autoRefresh=document.getElementById('rda-chbx-autorefresh').childNodes[0];autoRefresh.onchange=function(){if(autoRefresh.checked){localStorage.setItem('rdaAutoRefresh','true');getDiscussions(content);}else{localStorage.setItem('rdaAutoRefresh','false');clearTimeout(
timeout);}};if(isMod){var showDeleted=document.getElementById('rda-chbx-showdeleted').childNodes[0];showDeleted.onchange=function(){if(showDeleted.checked){localStorage.setItem('rdaShowDeleted','true');}else{localStorage.setItem('rdaShowDeleted','false');}getDiscussions(content,showDeleted.parentElement);};}}function createPage(status){if(config.wgCanonicalNamespace+':'+config.wgTitle!=='Special:DiscussionsActivity'){return;}document.title=i18n('document_title_new').escape()+' |'+document.title.split('|').slice(1).join('|');document.getElementById('PageHeader').getElementsByTagName('h1')[0].textContent=i18n('document_title_new').plain();var content=document.getElementById('mw-content-text');switch(status){case 200:var background=document.getElementById('WikiaPageBackground');var rgb=window.getComputedStyle(background).backgroundColor.match(/\d+/g);var hex='';rgb.forEach(function(i){hex+=parseInt(i,10).toString(16).padStart(2,i);});var title=document.getElementsByTagName('title')[0];var
style='<link rel="stylesheet" type="text/css" href="https://slot1-images.wikia.nocookie.net/__am/1515674256/sasses/color-page%3D%2523'+hex+'%26skins/extensions/wikia/MyHome/oasis.scss,extensions/wikia/Wall/css/WallWikiActivity.scss" />';title.insertAdjacentHTML('afterend',style);var blockers=['sysop','staff','helper','vstf','global-discussions-moderator'];canBlock=blockers.some(function(role){return config.wgUserGroups.indexOf(role)>-1;});isMod=Boolean(canBlock||config.wgUserGroups.indexOf('threadmoderator')>-1);var startLoading=function(){checkboxes(content);content.innerHTML='<span class="rda-loading">'+i18n('loading_discussions').escape()+'</span>';getDiscussions(content);};var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){startLoading();};request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){wallsEnabled=!0;}startLoading();}};request.open('GET',mw.util.getUrl('Message Wall:Wikia'),true);request.send();break;
case 404:content.textContent=i18n('error_discussions_disabled').plain();break;default:content.textContent=i18n('error_no_connection').plain();}}function insertLinks(){var pages={RecentChanges:{title:i18n('recent_changes').escape(),links:['WikiActivity','DiscussionsActivity']},WikiActivity:{title:i18n('wiki_activity').escape(),links:['WikiActivity/watchlist','RecentChanges','DiscussionsActivity']},DiscussionsActivity:{title:i18n('discussions_activity').escape(),links:['RecentChanges','WikiActivity']},'WikiActivity/watchlist':{title:i18n('watchlist').escape(),links:['RecentChanges','WikiActivity','DiscussionsActivity']}};if(Object.keys(pages).every(function(p){return'Special:'+p!==config.wgCanonicalNamespace+':'+config.wgTitle;})){return;}var headerSubtitle=document.getElementsByClassName('page-header__page-subtitle')[0];var pagesLinked=pages[config.wgTitle].links;var links=[];pagesLinked.forEach(function(page){links.push('<a href="'+config.wgScriptPath+'/wiki/Special:'+page+
'" title="Special:'+page+'">'+pages[page].title+' ></a>');});links=(config.wgTitle==='WikiActivity'&&!config.wgUserName?links.slice(1):links);headerSubtitle.innerHTML=links.join(' | ');}function isDiscussionsEnabled(){var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){createPage(request.status);};request.onreadystatechange=function(){if(request.readyState===4){createPage(request.status);if(request.status===200){insertLinks();}}};request.open('GET',config.wgScriptPath+'/f',true);request.send();}window.mw.hook('dev.i18n').add(function(lib){lib.loadMessages('DiscussionsActivity').done(function(lang){i18n=lang.msg;isDiscussionsEnabled();});});window.importArticles({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:DiscussionsActivity.css'});})();;(function(){if(!$('#userIdentityBoxEdit').exists()||window.EditBioLoaded){return;}window.EditBioLoaded=!0;var username=$('.masthead-info h1[itemprop="name"]').text();
if(!window.dev||!window.dev.i18n){importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}importArticle({type:'style',article:'u:dev:MediaWiki:EditBio.css'});var i18n,userdata;function saveError(res){console.error(res);}function saveBio(){var isWikiaOrg=mw.config.get('wgServer').indexOf('wikia.org')!==-1;$.ajax({type:'PUT',url:'https://services.'+(isWikiaOrg?'wikia.org':'fandom.com')+'/user-attribute/user/'+userdata.id+'/attr/bio',data:{value:$('#edit-bio-form #edit-bio-content').val()},xhrFields:{withCredentials:!0},error:saveError,success:clearCache});}function closeModal(){$('#edit-bio-form').closeModal();}function cacheCallback(res){if(res.status==='ok'){closeModal();setTimeout(refreshMasthead,500);}else{console.error(res);}}function clearCache(){$.nirvana.postJson('UserProfilePage','saveUserData',{userId:userdata.id,data:JSON.stringify({birthday:userdata.birthday}),token:mw.user.tokens.get('editToken')},cacheCallback);}function refreshMasthead(){window.location
.reload();}function editBio(){var bio=userdata.bio||'',modalContent=$('<div>').append($('<textarea>',{id:'edit-bio-content',rows:bio.split('\n').length,text:bio}));if(username!==mw.config.get('wgUserName')){modalContent.prepend($('<p>').append($('<strong>').text(i18n.msg('caution').plain()),':&nbsp;',i18n.msg('foreign-bio-edit').escape()));}$.showCustomModal(i18n.msg('edit').escape(),modalContent.html(),{id:'edit-bio-form',buttons:[{message:i18n.msg('cancel').escape(),handler:closeModal,id:'edit-bio-cancel'},{message:i18n.msg('save').escape(),handler:saveBio,defaultButton:!0,id:'edit-bio-save'}]});}function init(i18nd,nirvana){i18n=i18nd;if(nirvana[0]&&nirvana[0].user){userdata=nirvana[0].user;$('.WikiaUserPagesHeader .details ul').append($('<div>',{text:'['+i18n.msg('edit').plain()+']',id:'edit-bio-button',click:editBio}));}}function nirvana(){return $.nirvana.getJson('UserProfilePage','renderUserIdentityBox',{title:'User:'+username});}function i18nCallback(i18no){$.when(i18no.
loadMessages('EditBio'),nirvana()).then(init);}mw.hook('dev.i18n').add(i18nCallback);})();;(function(module,$,mw){'use strict';if(!$('#UserProfileMasthead').exists()||window.InactiveUsersLoaded){return;}window.InactiveUsersLoaded=!0;if(!Date.prototype.toISOString)Date.prototype.toISOString=function(){function pad(s){return(s+='').length<2?'0'+s:s;}return this.getUTCFullYear()+'-'+pad(this.getUTCMonth()+1)+'-'+pad(this.getUTCDate())+'T'+pad(this.getUTCHours())+':'+pad(this.getUTCMinutes())+':'+pad(this.getUTCSeconds())+'.'+(this.getUTCMilliseconds()/1000).toFixed(3).substr(-3)+'Z';};function isoDateNDaysAgo(days){return new Date(Date.now()-days*24*60*60*1000).toISOString();}module=$.extend({text:'inactive',gone:[],months:3},module);var user=$('#UserProfileMasthead h1[itemprop="name"]').text();mw.loader.using('mediawiki.api').then(function(){new mw.Api().get({action:'query',list:'usercontribs|users',uclimit:1,ucprop:'title|timestamp',ucuser:user,ucstart:isoDateNDaysAgo(0),ucend:
isoDateNDaysAgo(30*Math.max(parseInt(module.months,10)||1,1)),ususers:user,usprop:'gender'}).done(function(result){if(result&&result.query&&result.query.users&&result.query.users[0]&&((result.query.usercontribs&&!result.query.usercontribs.length)||module.gone.indexOf(user)!==-1)){var gender=result.query.users[0].gender||'unknown',$container=$('#UserProfileMasthead hgroup'),css=$container.find('.tag').length?{marginLeft:'10px'}:{},text=typeof module.text==='string'?module.text:typeof module.text==='object'?typeof module.text[gender]==='string'?module.text[gender]:module.text.unknown:'inactive';$container.append($('<span>',{'class':'tag inactive-user','css':css,text:text}));mw.hook('dev.inactiveusers').fire();}});});}(window.InactiveUsers=window.InactiveUsers||{},jQuery,mediaWiki));;(function($,mw){'use strict';var conf=mw.config.get(['debug','wgAction','wgCanonicalSpecialPageName','wgNamespaceNumber','wgTitle','wgUserName']),noHideTags=!!((window.dev||{}).profileTags||{}).noHideTags;
function hideTags($masthead){var $tags=$masthead.find('.tag');$tags.hide();}function getTagClass(tag){var tagClass='tag-'+tag.toLowerCase().replace(/\s/g,'_');return tagClass;}function getLinkTag($span,tag){var re=/\[\[(.+?)\|(.+?)\]\]/,match=re.exec(tag),href=mw.util.wikiGetlink(match[1]),text=match[2],$a=$('<a>').attr('href',href).css('color','inherit').text(text);$span.addClass(getTagClass(tag)).append($a);return $span;}function addProfileTags(tags){var $masthead=$('.UserProfileMasthead hgroup'),linkTestRe=/\[\[.+?\|.+?\]\]/;if(!noHideTags){hideTags($masthead);}tags.forEach(function(tag){var $span=$('<span>').addClass('tag');if(linkTestRe.test(tag)){$span=getLinkTag($span,tag);}else{$span.addClass(getTagClass(tag)).text(tag);}$masthead.append($span,' ');});mw.hook('dev.profile-tags').fire();}function getUserName(){var user=conf.wgTitle,target=$.getUrlVar('target'),parts;if(conf.wgCanonicalSpecialPageName==='Contributions'){parts=user.split('/');if(parts.length===2){user=parts[1];}
else if(target){user=decodeURIComponent(target).replace(/_/g,' ');}else{user=conf.wgUserName;if(user===null){user='';}}}return user;}function getUserTags(){var params={action:'raw',title:'MediaWiki:ProfileTags'};if(conf.debug){params.maxage=0;params.smaxage=0;}$.get(mw.util.wikiScript(),params,function(data){if(!data.length){return;}if(/^#!nohide/.test(data)){noHideTags=!0;}var user=$.escapeRE(getUserName()),re=new RegExp('(?:^|\\n)\\s*'+user+'\\s*\\|\\s*(.*?)\\s*(?:\\n|$)'),match=re.exec(data),tags;if(match===null){return;}tags=match[1].split(/\s*,\s*/);if(tags.length){addProfileTags(tags);}});}function init(){if($('.UserProfileMasthead').length){mw.loader.using(['mediawiki.util','site'],getUserTags);}}$(init);}(jQuery,mediaWiki));;window.dev=window.dev||{};dev.ReferencePopups=dev.ReferencePopups||{};dev.ReferencePopups.unload=dev.ReferencePopups.unload||function(){"use strict";delete this.Popup;delete this.configure;if(this.unloadCore){this.unloadCore();}};(function(module,lang){
"use strict";var i18n={en:{coreConfigureText:'Configure Reference Popups',coreConfigureHover:'Change settings for Reference Popups'},ar:{coreConfigureText:'اضبط تلميحات المراجع',coreConfigureHover:'اضبط إعدادات تلميح المراجع'},be:{coreConfigureText:'Налада усплываючых падказак',coreConfigureHover:'Змяніць налады усплываючых падказак'},ca:{coreConfigureText:'Configura referències emergents',coreConfigureHover:'Canviar la configuració de referències emergents'},de:{coreConfigureText:'Referenz-Popups konfigurieren',coreConfigureHover:'Einstellungsänderungen für Referenz-Popups'},el:{coreConfigureText:'Ρύθμιση Αναδυόμενων Αναφορών',coreConfigureHover:'Αλλαγή ρυθμίσεων για τις Αναδυόμενες Αναφορές'},es:{coreConfigureText:'Configurar popups de referencias',coreConfigureHover:
'Modificar la configuración de los popups de referencias'},fr:{coreConfigureText:'Configurer Popups de Référence',coreConfigureHover:'Modifier les préférences pour les Popups de Référence'},it:{coreConfigureText:'Configura le note a popup',coreConfigureHover:'Cambia le impostazioni per le note a popup'},ja:{coreConfigureText:'注釈ふきだしの設定',coreConfigureHover:'注釈ふきだしの設定を変更する'},ko:{coreConfigureText:'주석 말풍선 설정',coreConfigureHover:'주석 말풍선 설정하기'},nl:{coreConfigureText:'Configureer Referentie Popups',coreConfigureHover:'Wijzig de instellingen voor Referentie Popups'},pl:{coreConfigureText:'Skonfiguruj wyskakujące przypisy',coreConfigureHover:'Zmień ustawienia dla wyskakujących przypisów'},'pt-br':{coreConfigureText:'Configurar Popups de Referência',coreConfigureHover:'Mudar configurações para Popups de Referência'},ro:{coreConfigureText:'Configurați popupurile de referință',coreConfigureHover:
'Schimbă setările pentru popupurile de referință'},ru:{coreConfigureText:'Настройка всплывающих подсказок',coreConfigureHover:'Изменить настройки всплывающих подсказок'},tr:{coreConfigureText:'Referans Bildirimlerini Yapılandır',coreConfigureHover:'Referans Bildirimleri\'nin seçeneklerini değiştir'},uk:{coreConfigureText:'Налаштування спливаючих підказок',coreConfigureHover:'Змінити налаштування спливаючих підказок'},vi:{coreConfigureText:'Thiết Đặt Popup Tham Khảo',coreConfigureHover:'Thay đổi thiết đặt cho Popup Tham Khảo'},zh:{coreConfigureText:'设置参考资料弹窗',coreConfigureHover:'更改参考资料弹窗设置'},'zh-hans':{coreConfigureText:'设置参考资料弹窗',coreConfigureHover:'更改参考资料弹窗设置'},'zh-hant':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:
'變更參考資料彈窗設定'},'zh-hk':{coreConfigureText:'設置參考資料彈窗',coreConfigureHover:'更改參考資料彈窗設置'},'zh-tw':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'變更參考資料彈窗設定'}};var msg=module.messages=module.messages||{};for(var m in i18n.en){msg[m]=msg[m]||(i18n[lang]&&i18n[lang][m])||i18n.en[m];}})(dev.ReferencePopups,mediaWiki.config.get('wgUserLanguage'));(function(window,$,mw){"use strict";var module=window.dev.ReferencePopups;if(module.Popup){return $.noop;}var mwReady=$.Deferred(),mwDeps=['jquery.ui.position','jquery.effects.fold','jquery.ui.core','jquery.ui.widget'];mw.loader.load(mwDeps,null,true);mw.loader.using(mwDeps,mwReady.resolve,mwReady.reject);var colors=window.dev.colors||$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'u:dev:Colors/code.js'},dataType:'script',cache:!0});if(!module.cssLoaded){window.importArticle({type:'style',article:
'u:dev:MediaWiki:ReferencePopups.css'});module.cssLoaded=!0;}var dfd=$.Deferred();module.Popup=dfd.promise();return function(callback){$.when(mwReady,colors).done(function(){dfd.resolve(module.Popup=callback(module,window,$,mw,window.dev.colors));}).fail(function(){delete module.Popup;dfd.reject();});};}(window,jQuery,mediaWiki))(function(module,window,$,mw,Colors){"use strict";$.curCSS=$.curCSS||$.css;(function(color,Colors,mw,$){function ifOk(val,alt){return(val&&val!=='transparent'&&val!=='rgba(0, 0, 0, 0)')?val:alt;}function tryParse(val,alt){try{return Colors.parse(val);}catch(e){if(window.console){window.console.warn('Colors Parse Error ('+val+'): ',e,e.stack);}return Colors.parse(alt);}}function toRgba(color,alpha){return'rgba('+color.red()+','+color.green()+','+color.blue()+','+alpha+')';}if(mw.config.get('skin')==='oasis'){color.page=Colors.parse(Colors.wikia.page);color.pageBorder=Colors.parse(Colors.wikia.border);color.accent=Colors.parse(Colors.wikia.menu);color.popText=
Colors.wikia.text;}else{var $content=$('#content');color.page=tryParse(ifOk($('#globalWrapper').css('backgroundColor'),$content.css('backgroundColor')),'white');color.pageBorder=tryParse(ifOk($content.css('borderLeftColor'),$content.css('borderRightColor')),'#AAA');color.accent=tryParse(ifOk($('#footer').css('borderTopColor'),$('body').css('backgroundColor')),'#fabd23');color.popText=tryParse($('#mw-content-text').css('color'),'black');}var mixCol;if(color.page.isBright()){color.back=color.page.mix(mixCol='black',95).mix('blue',97);}else{color.back=color.page.mix(mixCol='white',95);}color.popEdge=color.accent.mix(color.pageBorder,90);color.backA=toRgba(color.back,0.95);color.backB=toRgba(color.back.mix(mixCol,99),0.95);color.backC=toRgba(color.back.mix(mixCol,97),0.95);Colors.css(
'\
	.refpopups-box {\
		background-color: $back;\
		color: $popText;\
		border-color: $popEdge;\
		background: -webkit-linear-gradient(30deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
		background: linear-gradient(60deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
	}\
	.refpopups-chevron-in {\
		border-top-color: $back;\
		border-top-color: $backA;\
	}\
	.refpopups-flipped > .refpopups-chevron-in {\
		border-bottom-color: $back;\
		border-bottom-color: $backA;\
	}\
	.refpopups-chevron-out {\
		border-top-color: $popEdge;\
	}\
	.refpopups-flipped > .refpopups-chevron-out {\
		border-bottom-color: $popEdge;\
	}',color);})(module.colors=module.colors||{},Colors,mw,$);var widgetId=0;$.widget('Lunarity.referencePopup',{options:{activateBy:'hover',hoverDelay:200,content:'',disabled:!1,visible:!1,animation:'fold',animSpeed:300,context:null
,escapeCloses:!0,extraClass:'',contentBoxClass:'',stickyHover:!1,open:null,close:null},_create:function(){if(!this.document){this.document=$(this.element[0].ownerDocument);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);this.eventNamespace='.'+this.widgetBaseClass+widgetId++;}this._timeouts={};this._$popup=$('<div class="refpopups-popup" id="'+this.eventNamespace.substr(1)+'">'+'<div class="refpopups-chevron-out"></div>'+'<div class="refpopups-chevron-in"></div>'+'<div class="refpopups-box">'+'</div></div>').addClass(this.options.extraClass).find('> .refpopups-box').addClass(this.options.contentBoxClass).end();this.options.context=$(this.document.find(this.options.context)[0]);if(!this.options.context.length){this.options.context=$(this.document[0].body);}this._setOption('activateBy',this.options.activateBy==='click'?'click':'hover');this._updateContent();if(!this.options.disabled){this.options.disabled=!0;this.enable();}if(this.options.visible){this.
options.visible=!1;this.show();}},_clearTimeout:function(name){if(this._timeouts[name]!==null){window.clearTimeout(this._timeouts[name]);this._timeouts[name]=null;}},_setTimeout:function(name,callback,delay){this._clearTimeout(name);var me=this;this._timeouts[name]=window.setTimeout(function(){me._timeouts[name]=null;callback.call(me);},delay||0);},_installEvents:function(){var self=this,map,ns=this.eventNamespace;this._$popup.off(ns);this.element.off(ns);this._clearTimeout('open');this._clearTimeout('close');if(this.options.disabled){return;}if(this.options.activateBy==='hover'){map={};map['mouseenter'+ns]=function(){self._clearTimeout('close');};map['mouseleave'+ns]=function(ev){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);};this._$popup.on(map);map={};map['mouseenter'+ns]=function(ev){self._clearTimeout('close');self._setTimeout('open',function(){this.show(ev);},self.options.hoverDelay);};map['mouseleave'+ns]=function(ev){self._clearTimeout('open')
;if(!self.options.stickyHover){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);}};this.element.on(map);}var lastTouch;map={};map['touchEnd'+ns]=function(ev){lastTouch=ev.originalEvent;};map['click'+ns]=function(ev){if((self.options.activateBy!=='click'&&(!lastTouch||lastTouch.defaultPrevented))||self.options.disabled){return;}lastTouch=null;if(!self.options.visible){ev.preventDefault();self.show(ev);}else{self.hide(ev);}};if(this.options.escapeCloses){var onKeyUp=function(ev){if(ev.which===$.ui.keyCode.ESCAPE){self.hide(ev);}};map['keyup'+ns]=onKeyUp;this._$popup.on('keyup'+ns,onKeyUp);}this.element.on(map);map=null;},triggerHover:function(event){if(this.options.activateBy==='hover'){this._setTimeout('open',function(){this.show(event);},this.options.hoverDelay);}},destroy:function(){this.hide();this._$popup.remove();this.element.off(this.eventNamespace);return $.Widget.prototype.destroy.call(this);},_updateContent:function(val){val=val||this.options.content
||'';if(!val.jquery&&!val.nodeType){this.options.content=val=$($(this.document[0].createElement('div')).html(val).contents().unwrap());}this._$popup.find('> .refpopups-box').empty().append(val);},_describeAria:function(yes){var k='aria-describedby',val=this.element.attr(k),s=val?val.split(/\s+/g):[],id=this._$popup[0].id,at=$.inArray(id,s);if(at!==-1){if(!yes){s.splice(at,1);}}else if(yes){s.push(id);}val=s.join(' ');this.element[val?'attr':'removeAttr'](k,val);},show:function(event){if(this.options.visible||this.options.disabled){return;}this.options.context.append(this._$popup.stop(true,true));this._positionPopup();this._describeAria(true);if(this.options.animation){this._$popup.hide().show(this.options.animation,this.options.animSpeed);}var triggered=0,self=this,ns=this.eventNamespace;this.window.on('scroll'+ns+' resize'+ns,function adaptCallback(){if(++triggered!==1){return;}self._positionPopup();window.setTimeout(function(){var t=triggered;triggered=0;if(t>1&&self.options.visible)
{adaptCallback();}},100);});if(this.options.activateBy==='click'){this.document.on('click'+ns,function(ev){if(!$(ev.target).closest(self._$popup.add(self.element)).length){self.hide();}});}this.options.visible=!0;this._trigger('open',event);},hide:function(event){if(!this.options.visible){return;}this.document.off(this.eventNamespace);this.window.off(this.eventNamespace);if(this.options.animation){var $clone=this._$popup.clone();this._$popup.after($clone);$clone.hide(this.options.animation,this.options.animSpeed,function(){$clone.remove();});}this._$popup.detach();this._describeAria(false);this.options.visible=!1;this._trigger('close',event);},toggle:function(yesno){yesno=(yesno!==void 0?yesno:!this.options.visible);this[yesno?'show':'hide']();},_setOption:function(key,val){switch(key){case'disabled':if(val&&this.options.visible){this.hide();}this.options.disabled=!!val;this._installEvents();return;case'visible':this[val?'show':'hide']();return;case'activateBy':if(({hover:1,click:
1})[val]===1){this.options.activateBy=val;this._installEvents();}return;case'content':this.options.content=val;this._updateContent();return;case'context':return;case'extraClass':this._$popup[0].className='refpopups-popup';this._$popup.addClass(val);break;case'extraBoxClass':this._$popup.find('> .refpopups-box').prop('className','refpopups-box').addClass(val);break;}return $.Widget.prototype._setOption.call(this,key,val);},_positionPopup:function(){var $popup=this._$popup.removeClass('refpopups-flipped'),$this=this.element,$chevOut=$popup.find('> .refpopups-chevron-out'),chevOutHeight=0;if($chevOut.is(':visible')){chevOutHeight=$chevOut.position().top+$chevOut.outerHeight()-$popup.outerHeight();}$popup.position({my:'bottom',at:'top',of:$this,collision:'fit none',offset:'0 -'+chevOutHeight});var spaceAtTop=$this.offset().top,spaceAtBottom=spaceAtTop+$this[0].offsetHeight,popupHeight=$popup[0].offsetHeight+chevOutHeight,scroll=this.window.scrollTop();spaceAtTop=spaceAtTop-scroll;
spaceAtBottom=(scroll+this.window.height())-spaceAtBottom;if(spaceAtTop<popupHeight&&spaceAtTop<spaceAtBottom){$popup.addClass('refpopups-flipped').position({my:'top',at:'bottom',of:$this,collision:'fit none',offset:'0 '+chevOutHeight});}if(!chevOutHeight){return;}var $chevIn=$popup.find('> .refpopups-chevron-in'),myLoc=$this.offset().left-$popup.offset().left+$this.outerWidth()/2;$chevOut.css('left',(myLoc-$chevOut.outerWidth()/2)+'px');$chevIn.css('left',(myLoc-$chevIn.outerWidth()/2)+'px');}});return $.Lunarity.referencePopup;});(function(window,$){"use strict";var module=window.dev.ReferencePopups;if(module.unloadCore){return $.noop;}module.unloadCore=$.noop;return function(callback){$.when(module.Popup).done(function(){callback(module,window,$,window.mediaWiki);}).fail(function(){delete module.unloadCore;});};}(window,jQuery))(function(module,window,$,mw){"use strict";var store={get:function(key){try{return JSON.parse(window.localStorage.getItem(key));}catch(e){return null;}},set:
function(key,data){try{window.localStorage.setItem(key,JSON.stringify(data));}catch(e){}}};var userConfig=(function(config,defaults){if(typeof(config)!=='object'||config===null){config={};}if(({hover:1,click:1})[config.react]!==1){config.react='hover';}config.hoverDelay=config.hoverDelay||defaults.hoverDelay||200;config.animate=(config.animate===void 0?defaults.animate===void 0||defaults.animate:!!config.animate);config.disabled=!!config.disabled&&!module.lockdown;config.stick=(config.stick===void 0?defaults.stick!==void 0&&defaults.stick:!!config.stick);return config;})(store.get('RefPopupsJS'),module.defaults||{});var armedPop=null,openPop=null,mwContentProcessed=!1;function cyclePopup(newTarget){if(openPop&&openPop.element.is(newTarget)){return;}if(armedPop){if(armedPop.element.is(newTarget)){return;}armedPop.destroy();}return(armedPop=constructPopup($(newTarget)));}function cleanupPopups(){if(openPop){openPop.destroy();}if(armedPop){armedPop.destroy();}openPop=armedPop=null;}
function installHooks($content){var lastTouch;$content=$content instanceof jQuery?$content:$('#mw-content-text');$content.on({'touchEnd.RefPopups':function(ev){lastTouch=ev.originalEvent;},'click.RefPopups':function(ev){if(((!lastTouch||lastTouch.defaultPrevented)&&userConfig.react!=='click')||userConfig.disabled){return;}lastTouch=null;var pop=cyclePopup(this);if(pop){ev.preventDefault();pop.show(ev);}},'referencepopupopen.RefPopups':function(){if(!armedPop||!armedPop.element.is(this)){return;}var oldOpen=openPop;openPop=armedPop;armedPop=null;if(oldOpen){oldOpen.destroy();}},'referencepopupclose.RefPopups':function(){if(!openPop||!openPop.element.is(this)){return;}if(armedPop){openPop.destroy();}else{armedPop=openPop;}openPop=null;}},'.reference');$(window).off('pagehide.RefPopups',cleanupPopups);$(window).on('pagehide.RefPopups',cleanupPopups);applyHoverEvents($content);}mw.hook('wikipage.content').add(function($content){mwContentProcessed=(($content instanceof jQuery)&&($content.
selector==='#mw-content-text'))?true:!1;if(!mwContentProcessed){mwContentProcessed=!0;installHooks($('#mw-content-text'));}installHooks($content);});function applyHoverEvents($content){var $article=($content&&($content instanceof jQuery)&&$content.length)?$content:$('#mw-content-text');$article.off('mouseenter.RefPopups');if(userConfig.disabled){return;}if(userConfig.react!=='hover'){if(openPop){openPop.option('activateBy','click');}if(armedPop){armedPop.option('activateBy','click');}return;}$article.on('mouseenter.RefPopups','.reference',function(){var pop=cyclePopup(this);if(pop){pop.triggerHover();}});if(openPop){openPop.option('activateBy','hover');}if(armedPop){armedPop.option('activateBy','hover');}}if(!module.lockdown){$(function($){$('#articleCategories, #catlinks').first().after($('<a href="#configure-refpopups" class="refpopups-configure-page" />').html('['+module.messages.coreConfigureText+']').click(onClickConfigure).appendTo(this));});}module.unloadCore=function(){$(
'#mw-content-text').off('.RefPopups');$(window).off('.RefPopups');$('a[href="#configure-refpopups"]').remove();cleanupPopups();delete this.unloadCore;};$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},userConfig));var configureIsPending=!1;function onClickConfigure(ev){ev.preventDefault();var closeFunc=function(){configureIsPending=!1;},interfaceFunc=function(confFunc){confFunc(userConfig,function(newSettings){store.set('RefPopupsJS',newSettings);cleanupPopups();applyHoverEvents();$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},newSettings));},closeFunc);};if(configureIsPending){return;}configureIsPending=!0;if(module.configure){$.when(module.configure).done(interfaceFunc).fail(closeFunc);return;}$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'w:dev:ReferencePopups/code.configure.js'},dataType:'script',cache:!0}).then(function(){$.when(module.configure).done(interfaceFunc).fail(
closeFunc);}).fail(closeFunc);}function constructPopup($ref){var frag=$ref.find('a[href^="#cite_note"]').first();if(!frag.length){return null;}var $cite=$(frag.attr('href').replace(/([.:])/g,'\\$1'));if(!$cite.length){return null;}var $content=$('<div style="overflow:auto">'),$conf=$('<a href="#" class="refpopups-configure" />').prop('title',module.messages.coreConfigureHover).click(onClickConfigure);$content.append($cite.find('.reference-text').clone());return new module.Popup({content:$conf.add($content),activateBy:userConfig.react,hoverDelay:userConfig.hoverDelay,animation:userConfig.animate&&'fold',stickyHover:userConfig.stick,contentBoxClass:'WikiaArticle'},$ref[0]);}});;(function($,mw,RevealAnonIP,ArticleComments,WikiActivity){"use strict";RevealAnonIP=$.extend(RevealAnonIP,{});RevealAnonIP.permissions=$.extend(['*'],RevealAnonIP.permissions);if(typeof(RevealAnonIP.reveal)==='function'){return;}var hasPermission=(function(){var permissions=RevealAnonIP.permissions;var usergroups;
usergroups=mw.config.get('wgUserGroups');usergroups=$.extend(['*'],usergroups);for(var i=0,plen=permissions.length;i<plen;++i){for(var j=0,ulen=usergroups.length;j<ulen;++j){if(usergroups[j]===permissions[i]){return true;}}}return false;}());function revealIPs(){if(!hasPermission){return;}var isIPv4Address=mw.util.isIPv4Address,isIPv6Address=mw.util.isIPv6Address;$('.edited-by > a').not('#Wall *').add($('#Forum .last-post > a').filter(function(){return!this.children.length;})).add('.activityfeed cite a, .activity-module .edit-info-user').each(function(){var $this=$(this),href=$this.attr('href'),lastSlash=href.lastIndexOf('/'),ip;if(lastSlash!==-1){ip=href.substr(lastSlash+1);if(isIPv4Address(ip)||isIPv6Address(ip)){$this.text(ip);}}});}RevealAnonIP.reveal=$.noop;RevealAnonIP.getPermission=function(){return hasPermission;};RevealAnonIP.init=function(){hasPermission=!0;mw.loader.using('mediawiki.util',function(){RevealAnonIP.reveal=revealIPs;$(function(){if(ArticleComments){var realFunc
=ArticleComments.addHover;ArticleComments.addHover=function(){var result=realFunc.apply(this,arguments);RevealAnonIP.reveal();return result;};}else{if(WikiActivity){var ajaxFunc=WikiActivity.ajax;WikiActivity.ajax=function(a,b,callback){return ajaxFunc.call(this,a,b,function(){var result=callback.apply(this,arguments);RevealAnonIP.reveal();return result;});};}if(!$.isArray(window.ajaxCallAgain)){window.ajaxCallAgain=[];}window.ajaxCallAgain.push(RevealAnonIP.reveal);}RevealAnonIP.reveal();});});this.init=$.noop;};if(hasPermission){RevealAnonIP.init();}window.RevealAnonIP=RevealAnonIP;}(jQuery,mediaWiki,window.RevealAnonIP,window.ArticleComments,window.WikiActivity));;require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';var $rail=$('#WikiaRail');if(!$rail.exists()||window.SeeMoreActivityButtonLoaded){return;}window.SeeMoreActivityButtonLoaded=!0;function loadLib(lib,mod){var deferred=$.Deferred();if(!window.dev||!window.dev[lib]){importArticle({type:'script',
article:mod});}mw.hook('dev.'+lib).add(function(){deferred.resolve();});return deferred.promise();}function preload(){$.when(loadLib('i18n','u:dev:I18n-js/code.js').then(function(){return window.dev.i18n.loadMessages('SeeMoreActivityButton');}),loadLib('wds','u:dev:WDSIcons/code.js'),mw.loader.using('mediawiki.api')).done(function(i18n,_1,_2){init(i18n);});}function init(i18n){i18n.useUserLang();window.dev.seeMoreActivity=new SeeMoreActivity(i18n);}function SeeMoreActivity(i18n){this.i18n=i18n.msg('see-more').plain();this.icon={diff:window.dev.wds.icon('magnifying-glass-tiny'),btn:window.dev.wds.icon('menu-control-small')};this.conf={rc:window.SeeMoreActivityButtonRC||!1,old:window.SeeMoreActivityButtonOld||!1};if(!this.conf.old){this._api=new mw.Api();this._api.get({action:'query',meta:'allmessages',ammessages:'Custom-SeeMoreActivityButton-config-old',amlang:mw.config.get('wgUserLanguage'),smaxage:300,maxage:300}).done(this._call.bind(this));}else{this._call();}}SeeMoreActivity.
prototype._call=function(d){if(d){try{if(JSON.parse(d.query.allmessages[0]['*'].trim())){this.conf.old=!0;}}catch(e){this.conf.old=!1;}}else{this.conf.old=!0;}if($rail.hasClass('loaded')){this._execute();}else{$rail.on('afterLoad.rail',$.proxy(this._execute,this));}};SeeMoreActivity.prototype._execute=function(){var $activity=$rail.children('#wikia-recent-activity');if(!$activity.exists()){return;}$activity.children('h2').append($('<a>',{'href':mw.util.getUrl('Special:'+(this.conf.rc?'RecentChanges':'WikiActivity')),'class':'wds-button wds-is-text','id':'seemoreactivity-button','title':this.i18n,html:this.icon.btn.cloneNode(true)}));$activity.find('.page-title-link').each($.proxy(function(i,p){var $p=$(p);$p.parent().before($('<a>',{'class':'seemoreactivity-diff-link','href':$p.attr('href')+'?diff=cur',html:this.icon.diff.cloneNode(true)}));},this));if(Boolean(this.conf.old)){$activity.addClass('seemoreactivity-old');$activity.find('.activity-item:last-child .edit-info-user').
css('max-width',(+$activity.width()-$activity.find('#seemoreactivity-button').width()-$activity.find('.activity-item:last-child .edit-info-time').width()-12).toString()+'px');}mw.hook('SeeMoreActivityButton.loaded').fire();};importArticle({type:'style',article:'u:dev:MediaWiki:SeeMoreActivityButton.css'});preload();});;(function(){if(window.TwitterFollowButtonLoaded){return;}function loadTwitterJavaScript(){if(window.twttr){if(window.twttr.widgets){twttr.widgets.load();}}else{if($('#twitter-wjs').exists()){return;}var $script=$('<script>',{id:'twitter-wjs',src:'https://platform.twitter.com/widgets.js'}).insertBefore($('script').first());window.twttr={_e:[],ready:function(f){window.twttr._e.push(f);}};}}window.TwitterFollowButtonLoaded=!0;var regex=/^https?:\/\/(?:www\.)?twitter\.com\/@?[A-Za-z0-9_]+$/;mw.hook('wikipage.content').add(function($content){var $buttons=$content.find('.twitter-follow-button:not(.twitter-follow-button-rendered)');$buttons.each(function(){var $this=$(this),
href=$this.attr('data-href'),attributes=$this.prop('attributes'),text=$this.text(),$anchor=$('<a></a>');regex.lastIndex=0;if(!regex.test(href)){return;}$.each(attributes,function(){$anchor.attr(this.name,this.value);});$anchor.text(text).attr('href',href).removeAttr('data-href');$this.replaceWith($anchor);});if($buttons.length){loadTwitterJavaScript();}});})();;(function(){'use strict';var cache={};function addAvatar($content){$content.find('.UserAvatarFetch:not(.loaded)').each(function(){var $this=$(this),username=$this.find('.avi-thisUsername').text(),avatar=cache[username],size=Number($this.find('.avi-thisSize').text());if(!avatar){return;}if(!isNaN(size)){if(size>150){size=150;}else if(size<16){size=16;}avatar=avatar.replace(/\/scale-to-width-down\/\d+/,'/scale-to-width-down/'+size);}$this.html($('<img>',{src:avatar,alt:username,style:'vertical-align: initial; width: '+size+'px; height: '+size+'px;'})).addClass('loaded');});}function findAvatars($content,original){if(!$content||(
$content.is(mw.util.$content)&&!original)){return;}var avatars=$content.find('.UserAvatarFetch:not(.loaded) .avi-thisUsername').map(function(_,el){return $(el).text();}).toArray().filter(function(el){return!cache[el];});if(avatars.length>0){$.getJSON(mw.config.get('wgScriptPath')+'/api/v1/User/Details',{ids:avatars.join(',')},function(d){d.items.forEach(function(el){cache[el.name]=el.avatar;});addAvatar($content);});}else{addAvatar($content);}}findAvatars(mw.util.$content,true);mw.hook('wikipage.content').add(findAvatars);})();;require(['wikia.window','jquery','mw','wikia.mustache'],function(window,$,mw,Mustache){'use strict';var config=mw.config.get(['wgAction','wgNamespaceNumber','wgTitle','wgUserGroups','wgUserName']),groups=config.wgUserGroups.join(' '),loading=0;if(config.wgNamespaceNumber===1202){$('#ca-talk').remove();return;}else if(config.wgTitle.indexOf('/')!==-1||config.wgNamespaceNumber!==1200||!(config.wgUserName===config.wgTitle||/sysop|threadmoderator|vstf|helper|staff/.
test(groups))||config.wgAction!=='edit'||window.WallGreetingButtonLoaded){return;}window.WallGreetingButtonLoaded=!0;function preload(){if(++loading===2){$.when(window.dev.i18n.loadMessages('WallGreetingButton'),mw.loader.using(['mediawiki.Title'])).then(init);}}function init(i18n){i18n.useUserLang();var params={url:new mw.Title(config.wgTitle,1202).getUrl(),wallUrl:new mw.Title(config.wgTitle,1200).getUrl()};['editGreeting','history','wallHistory','delete','protect','raw'].forEach(function(el){params[el]=i18n.msg(el).plain();});$('#WikiaMainContentContainer').prepend(Mustache.render('<div class="page-header" id="PageHeader" style="padding: 0;">'+'<div class="UserProfileActionButton" id="EditMessageWallGreeting">'+'<div class="wds-button-group" id="ca-edit" style="text-align: left;">'+'<a accesskey="e" href="{{url}}?action=edit" class="wds-is-squished wds-button">'+window.dev.wds.icon('pencil-small').outerHTML+'<span>{{editGreeting}}</span>'+'</a>'+'<div class="wds-dropdown">'+
'<div class="wds-button wds-is-squished wds-dropdown__toggle">'+'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" class="wds-icon wds-icon-tiny wds-dropdown__toggle-chevron" id="wds-icons-dropdown-tiny">'+'<path d="M6 9l4-5H2" fill-rule="evenodd"></path>'+'</svg>'+'</div>'+'<div class="wds-dropdown__content wds-is-not-scrollable wds-is-right-aligned" style="z-index: 2;">'+'<ul class="wds-list wds-is-linked">'+'<li><a id="ca-history" href="{{url}}?action=history">{{history}}</a></li>'+'<li><a accesskey="h" href="{{wallUrl}}?action=history">{{wallHistory}}</a></li>'+(/sysop|content-moderator|vstf|helper|staff/.test(groups)?'<li><a id="ca-delete" href="{{url}}?action=delete">{{delete}}</a></li>'+(window.WallGreetingButtonProtect?'<li><a id="ca-protect" href="{{url}}?action=protect">{{protect}}</a></li>':''):'')+(window.WallGreetingButtonRaw?'<li><a id="ca-raw" href="{{url}}?action=raw">{{raw}}</a></li>':'')+'</ul>'+'</div>'+'</div>'+'</div>'+'</div>'+
'</div>',params));}importArticles({type:'script',articles:['u:dev:MediaWiki:I18n-js/code.js','u:dev:MediaWiki:WDSIcons/code.js']});mw.hook('dev.i18n').add(preload);mw.hook('dev.wds').add(preload);});;require(['jquery','mw'],function($,mw){var storageKey='ls-wikianotifications';function log(error){console.log('WikiaNotifications error: '+error);}function getNotificationData(){return(new mw.Api()).get({action:'parse',disablepp:'',page:'MediaWiki:Custom-WikiaNotifications',format:'json'}).then(function(res){var dfd=$.Deferred();if(res.error){return dfd.rejectWith(this,[res.error.info]);}var text=res.parse.text['*'].trim();text=(text||'').replace(/<script>[\s\S]*?<\/script>/igm,'').replace(/<!\-\-[\s\S]*?\-\->/igm,'');if(!text.length||!text.trim().length){return dfd.rejectWith(this,['empty content']);}return dfd.resolveWith(this,[{version:res.parse.revid,contents:text}]);});}function showNotificationIfNotViewed(notification){var notifsData=JSON.parse(window.localStorage.getItem(storageKey)
)||{},hasSeen=(notifsData[mw.config.get('wgCityId')]===notification.version),$notificationArea=$('#WikiaNotifications'),hasNotifications=$notificationArea.length?1:0;if(hasSeen){return;}var $notif=$('<li/>').attr('class','custom').append($('<div>').attr('data-type','2').html(notification.contents).append($('<a>').addClass('sprite close-notification')));if(hasNotifications){$notificationArea.append($notif);}else{$('body').addClass('notifications').append($('<ul id="WikiaNotifications" class="WikiaNotifications"></ul>').append($notif));}$('.sprite.close-notification').on('click',function(){$notif.hide();notifsData[mw.config.get('wgCityId')]=notification.version;window.localStorage.setItem(storageKey,JSON.stringify(notifsData));});}mw.loader.using('mediawiki.api',function(){if(mw.config.get('wgUserName')){$(function(){getNotificationData().then(showNotificationIfNotViewed).fail(log);});}});});;$(function initWorkingMoreUsersCount(){if(!mw.loader.getState('ext.Chat2'))return;if(!$(
'.more-users-count').length){$('#WikiaRail').on('afterLoad.rail',initWorkingMoreUsersCount);return;}if(window.WorkingMoreUsersCountLoaded)return;window.WorkingMoreUsersCountLoaded=!0;importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:WorkingMoreUsersCount.css'});$('body').off('click','.WikiaChatLink, .chat-module .start-a-chat-button, .chat-module .more-users-count',ChatWidget.openChat).on('click','.WikiaChatLink, .chat-module .start-a-chat-button',ChatWidget.openChat);function setupListeners(i18n){$('.chat-module .more-users-count').removeAttr('href').on('click',function(e){e.preventDefault();if($('#uc-modal').length){return;}var $ajax=$('<img>',{id:'uc-modal-ajax',src:window.stylepath+'/common/images/ajax.gif',alt:i18n.msg('loading').plain(),title:i18n.msg('loading').plain()}),$userlist=$('<ul>',{id:'uc-modal-userlist'}),$user=$('<li>',{class:'uc-modal-user',append:[$('<img>',{class:'uc-avatar wds-avatar'}),$('<a>',{class:
'uc-username'}),$('<div>',{class:'uc-actions'})]});$.showCustomModal(i18n.msg('users').escape(),$ajax,{id:'uc-modal',buttons:[{id:'uc-close-butt',message:i18n.msg('close').escape(),handler:function(){$('#uc-modal').closeModal();}},{id:'uc-chat-butt',message:$('.start-a-chat-button').first().text(),defaultButton:!0,handler:function(){ChatWidget.onClickChatButton(mw.util.getUrl('Special:Chat'));}}]});$.get(mw.config.get('wgScriptPath')+'/wikia.php?controller=Chat&format=json',function(d){$('#uc-modal-ajax').replaceWith($userlist);var str=d.globalVariablesScript,fixedJson=str.match(/"wgWikiaChatUsers":\s*(\[[\s\S]+?\])/)[1].replace(/\\x([0-9a-f]{2})/g,'\\u00$1').replace(/\\'/g,"'"),json=JSON.parse(fixedJson),arr=json.sort(function(a,b){return a.username.localeCompare(b.username);}).reverse(),i=arr.length;while(i--){var item=arr[i],$el=$user.clone();$el.find('.uc-avatar').attr('src',item.avatarUrl);$el.find('.uc-username').attr('href',mw.util.wikiGetlink('User:'+item.username)).text(item
.username);$el.find('.uc-actions').append($('<a>',{href:item.profileUrl,html:item.profileIcon}),$('<a>',{href:item.contribsUrl,html:item.contribIcon}));$('#wds-icons-reply-small, #wds-icons-pencil-small').removeAttr('id');$userlist.append($el);}});});}mw.hook('dev.i18n').add(function(lib){lib.loadMessages('WorkingMoreUsersCount').done(function(i18n){i18n.useUserLang();setupListeners(i18n);});});});;;mw.loader.state({"wikia.fake.articles.572e4515e6648ece66541d43a914f425":"ready"});

/* cache key: esdragonball:resourceloader:filter:minify-js:7:004575d508213dbb014e7a95253ef8e6 */